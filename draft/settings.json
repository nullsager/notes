// VSCode 设置文件
// 需要安装toggle插件
{
  "window.titleBarStyle": "custom",
  "window.commandCenter": true,
  "editor.fontSize": 17,
  // 字体设置
  "editor.fontFamily": "'JetBrainsMono NF', 'FiraCode Nerd Font'",
  // 控制连体字
  "editor.fontLigatures": true,
  "editor.lineHeight": 1.3,
  // 图标设置
  "workbench.iconTheme": "material-icon-theme",
  // 缩进设置
  "[python]": {
    "editor.tabSize": 4
  },
  "editor.tabSize": 2,
  "editor.cursorSurroundingLines": 10,
  // 是否显示缩略图
  "editor.minimap.enabled": true,
  // 粘滞滚动关闭 end
  "editor.stickyScroll.enabled": true,
  "editor.mouseWheelZoom": true,
  "workbench.sideBar.location": "left",
  "window.menuBarVisibility": "toggle",
  // 自动格式化
  "editor.formatOnSave": true,
  "editor.cursorSmoothCaretAnimation": "on",
  "editor.cursorBlinking": "phase", // expand,smooth,phase
  "zenMode.showTabs": "none", // "none": 不显示, "single": 只显示单个, "multiple": 显示多个
  // 默认会隐藏行号，如果你需要行号，可以设为 false
  "zenMode.hideLineNumbers": false,
  // 隐藏滚动条
  "editor.scrollbar.verticalScrollbarSize": 0,
  "editor.scrollbar.horizontalScrollbarSize": 0,
  //////////////////////////////////////////////////////////////////////////////////////////
  // vim 设置
  // 相对行号
  "vim.leader": "<space>",
  "editor.lineNumbers": "relative",
  // 系统粘贴板
  "vim.useSystemClipboard": true,
  // 突出显示搜索文本
  "vim.hlsearch": true,
  // 高亮要粘贴的内容
  "vim.highlightedyank.enable": true,
  // insert模式映射
  "vim.insertModeKeyBindings": [
    {
      "before": [
        "j",
        "k"
      ],
      "after": [
        "<Esc>"
      ]
    },
  ],
  // normal模式映射
  "vim.normalModeKeyBindingsNonRecursive": [
    {
      "before": [
        "<Esc>"
      ],
      "commands": [
        ":nohl"
      ]
    },
    {
      "before": [
        "<C-h>"
      ],
      "commands": [
        "workbench.action.navigateLeft"
      ]
    },
    {
      "before": [
        "<C-j>"
      ],
      "commands": [
        "workbench.action.navigateDown"
      ]
    },
    {
      "before": [
        "<C-k>"
      ],
      "commands": [
        "workbench.action.navigateUp"
      ]
    },
    {
      "before": [
        "<C-l>"
      ],
      "commands": [
        "workbench.action.navigateRight"
      ]
    },
    {
      "before": [
        "H"
      ],
      "commands": [
        "workbench.action.previousEditor"
      ]
    },
    {
      "before": [
        "L"
      ],
      "commands": [
        "workbench.action.nextEditor"
      ]
    },
    {
      "before": [
        "<leader>",
        "-"
      ],
      "commands": [
        {
          "command": "workbench.action.splitEditorDown"
        }
      ]
    },
    {
      "before": [
        "<leader>",
        "|"
      ],
      "commands": [
        {
          "command": "workbench.action.splitEditor"
        }
      ]
    },
    {
      "before": [
        "<leader>",
        "e"
      ],
      "commands": [
        "workbench.action.toggleSidebarVisibility"
      ]
    },
    {
      "before": [
        "<leader>",
        "E"
      ],
      "commands": [
        "workbench.view.explorer"
      ]
    },
    {
      "before": [
        "<leader>",
        "c",
        "a"
      ],
      "commands": [
        "editor.action.quickFix"
      ]
    },
    {
      "before": [
        "]",
        "d"
      ],
      "commands": [
        "editor.action.marker.next"
      ],
      "when": "editorTextFocus && editorHasMarkerProblems"
    },
    {
      "before": [
        "[",
        "d"
      ],
      "commands": [
        "editor.action.marker.prev"
      ],
      "when": "editorTextFocus && editorHasMarkerProblems"
    },
    {
      "before": [
        "K"
      ],
      "commands": [
        "editor.action.showHover"
      ]
    },
    {
      "before": [
        "<leader>",
        "u",
        "C"
      ],
      "commands": [
        "workbench.action.selectTheme"
      ]
    },
    {
      "before": [
        "<leader>",
        "u",
        "z"
      ],
      "commands": [
        "workbench.action.toggleZenMode"
      ]
    },
    {
      "before": [
        "<leader>",
        ","
      ],
      "commands": [
        "workbench.action.showAllEditorsByMostRecentlyUsed"
      ]
    },
    {
      "before": [
        "<leader>",
        "f",
        "r"
      ],
      "commands": [
        "workbench.action.quickOpen"
      ]
    },
    {
      "before": [
        "<leader>",
        "f",
        "R"
      ],
      "commands": [
        "workbench.action.openRecent"
      ]
    },
    {
      "before": [
        "<leader>",
        "c",
        "r"
      ],
      "commands": [
        "editor.action.rename"
      ]
    },
    {
      "before": [
        "<leader>",
        "u",
        "d"
      ],
      "commands": [
        {
          "command": "toggle",
          "args": {
            "id": "problems", // 随便起一个就行
            "value": [
              {
                "problems.visibility": false
              }, // 第一次按：关掉所有波浪线
              {
                "problems.visibility": true
              } // 再按一次：重新打开
            ]
          }
        }
      ]
    },
  ],
  // visual模式映射
  "vim.visualModeKeyBindings": [
    {
      "before": [
        ">"
      ],
      "commands": [
        "editor.action.indentLines"
      ]
    },
    {
      "before": [
        "<"
      ],
      "commands": [
        "editor.action.outdentLines"
      ]
    },
  ],
  "vim.handleKeys": {
    "<C-p>": false,
  },
  // vim底部状态栏
  "vim.statusBarColorControl": true,
  "vim.statusBarColors.normal": [
    "#8FBCBB",
    "#434C5E"
  ],
  "vim.statusBarColors.insert": "#BF616A",
  "vim.statusBarColors.visual": "#B48EAD",
  "vim.statusBarColors.visualline": "#B48EAD",
  "vim.statusBarColors.visualblock": "#A3BE8C",
  "vim.statusBarColors.replace": "#D08770",
  "vim.statusBarColors.commandlineinprogress": "#007ACC",
  "vim.statusBarColors.searchinprogressmode": "#007ACC",
  "vim.statusBarColors.easymotionmode": "#007ACC",
  "vim.statusBarColors.easymotioninputmode": "#007ACC",
  "vim.statusBarColors.surroundinputmode": "#007ACC",
  // To improve performance
  "extensions.experimental.affinity": {
    "vscodevim.vim": 1
  },
  // 插件
  "vim.easymotion": true,
  //////////////////////////////////////////////////////////////////////////////////////////
  // latex
  // --- 基础体验优化 ---
  "latex-workshop.latex.autoBuild.run": "onSave", // 建议改为保存时自动编译，效率更高
  "latex-workshop.showContextMenu": true,
  "latex-workshop.intellisense.package.enabled": true,
  // [重要] 开启错误提示，否则出错你都不知道
  "latex-workshop.message.error.show": true,
  "latex-workshop.message.warning.show": false, // 警告可以不弹窗，看面板即可
  // --- 工具定义 (Tools) ---
  "latex-workshop.latex.tools": [
    {
      // 方案1: 纯 XeLaTeX (用于简单文档)
      "name": "xelatex",
      "command": "xelatex",
      "args": [
        "-synctex=1",
        "-interaction=nonstopmode",
        "-file-line-error",
        "%DOC%"
      ]
    },
    {
      // 方案2: 智能编译 (推荐! 自动处理引用和多次编译)
      // 这个工具会自动判断是用 xelatex 还是 pdflatex，并自动运行 bibtex
      "name": "latexmk",
      "command": "latexmk",
      "args": [
        "-synctex=1",
        "-interaction=nonstopmode",
        "-file-line-error",
        "-pdf", // 默认生成pdf
        "-xelatex", // 强制使用 xelatex 引擎 (适合中文环境)
        "%DOC%"
      ]
    },
    {
      "name": "bibtex",
      "command": "bibtex",
      "args": [
        "%DOCFILE%"
      ]
    }
  ],
  // --- 流程定义 (Recipes) ---
  "latex-workshop.latex.recipes": [
    {
      // [首选] 将 latexmk 放在第一位，作为默认编译方式
      "name": "Lazy Build (latexmk)",
      "tools": [
        "latexmk"
      ]
    },
    {
      // 备用：手动单次编译
      "name": "XeLaTeX (Simple)",
      "tools": [
        "xelatex"
      ]
    },
    {
      // 备用：经典手动链 (通常不需要，除非 latexmk 失效)
      "name": "XeLaTeX -> BibTeX -> XeLaTeX*2",
      "tools": [
        "xelatex",
        "bibtex",
        "xelatex",
        "xelatex"
      ]
    }
  ],
  // --- 清理设置 ---
  "latex-workshop.latex.clean.fileTypes": [
    "*.aux",
    "*.bbl",
    "*.blg",
    "*.idx",
    "*.ind",
    "*.lof",
    "*.lot",
    "*.out",
    "*.toc",
    "*.acn",
    "*.acr",
    "*.alg",
    "*.glg",
    "*.glo",
    "*.gls",
    "*.ist",
    "*.fls",
    "*.log",
    "*.fdb_latexmk",
    "*.synctex.gz"
  ],
  // [重要] 编译失败不要自动清理，否则看不到 log 日志
  "latex-workshop.latex.autoClean.run": "never",
  // --- PDF 阅读器 ---
  "latex-workshop.view.pdf.viewer": "tab",
  "latex-workshop.view.pdf.internal.synctex.keybinding": "double-click",
  ///////////////////////////////////////////////////////////////////////////////////////
  "workbench.colorCustomizations": {
    "statusBar.noFolderBackground": "#8FBCBB",
    "statusBar.debuggingBackground": "#8FBCBB",
    "statusBar.foreground": "#434C5E",
    "statusBar.debuggingForeground": "#434C5E",
    "statusBar.background": "#8FBCBB"
  },
  "workbench.colorTheme": "One Dark Pro Night Flat",
  "problems.visibility": true,
  "workbench.activityBar.location": "hidden",
}
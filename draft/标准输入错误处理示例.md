```cpp
#include <limits>
#include <iostream>
#include <string>
#include <string_view>
#include <cassert>
#include <bitset>

// 忽略输入的多余信息，直到换行符为止
void ignoreLine() {
  std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
}
// 如果std::cin在当前行有未提取的输入,则返回true,否则返回false
// 如果最后的输入操作到达了输入流的末尾，std::cin.eof()函数返回true
// std::cin.peek()函数允许在不提取下一个字符的情况下查看输入流中的下一个字符
bool hasUnextractedInput() {
  // !std::cin.eof()为真代表最后的输入操作没有到达末尾
  // 在这种情况下，调用 std::cin.peek() 来查看下一个等待提取的字符
  // 如果查看到的字符不为'\n'，则代表着还存在着多余的字符
  return !std::cin.eof() && std::cin.peek() != '\n';
}
// 如果提取失败，返回true，提取成功返回true
bool clearFailedExtraction() {
  if (!std::cin) {
    if (std::cin.eof()) {
      std::exit(0);
    }
    std::cin.clear();
    ignoreLine();
    return true;
  }
  return false;
}
// getDouble的版本1
// 直接忽略输入的多余信息
double getDouble() {
  while (true) {
    std::cout << "Enter a decimal number: ";
    double x{};
    std::cin >> x;
    if (clearFailedExtraction()) {
      std::cout << "Oops, that input is invaild, please try again\n";
      continue;
    }
    ignoreLine();
    return x;
  }
}
// getDouble的版本2
// 如果输入多余信息，则重新执行输入流程
double getDouble2() {
  while (true) {
    std::cout << "Enter a decimal number: ";
    double x{};
    std::cin >> x;
    if (hasUnextractedInput()) {  // 存在多余输入
      ignoreLine();  // 忽略多余的输入
      continue;
    }
    return x;
  }
}
char getOperator() {
  while (true) {
    std::cout << "Enter one of the following: +, -, *, or /: ";
    char op{};
    std::cin >> op;
    // 如果不添加这行，如果输入的类似于dajds，那么会输出5次
    // Oops, that input is invaild, please try again
    // 这是因为首先clearFailedExtraction()函数会返回false,然后会执行ignoreLine函数
    // 将后面多余的ajds都清空

    if (!clearFailedExtraction()) ignoreLine();
    switch (op) {
      case '+':
      case '-':
      case '*':
      case '/':
        return op;
      default:
        std::cout << "Oops, that input is invaild, please try again\n";
    }
  }
}
void printResult(double x, char operation, double y) {
  std::cout << x << ' ' << operation << ' ' << y << " is ";
  switch (operation) {
    case '+':
      std::cout << x + y << '\n';
      return;
    case '-':
      std::cout << x - y << '\n';
      return;
    case '*':
      std::cout << x * y << '\n';
      return;
    case '/':
      std::cout << x / y << '\n';
      return;
  }
  std::cout << "???";  // 出错的情况
}
int main() {
  double x{getDouble()};
  char operation{getOperator()};
  double y{getDouble()};
  printResult(x, operation, y);
}

```

一个标准的输入流程：

```cpp
while (true) {
	std::cout << "请输入："
	std::cin >> something;
	if (clearFailedExtraction()) {
		std::cout << "出错信息\n";
		continue;
	}
	ignoreLine();  // 忽略多输入的信息
	return something;
}
```
